# MemoHero åŸºæœ¬è¨­è¨ˆæ›¸

**Version 1.0 | æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ29æ—¥**

## æ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
MemoHeroã¯ã€SwiftUIã¨UIKitã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ§‹æˆã§é–‹ç™ºã•ã‚ŒãŸiOS/iPadOSå‘ã‘ã®é«˜æ©Ÿèƒ½ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªãƒ¡ãƒ¢ä½œæˆãƒ»ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã€å€‹äººã‹ã‚‰ä¼æ¥­ã¾ã§å¹…åºƒã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã—ã¾ã™ã€‚

### è¨­è¨ˆç›®æ¨™
- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**: ç›´æ„Ÿçš„ã§ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: é«˜é€Ÿã§è»½é‡ãªå‹•ä½œ
- **æ‹¡å¼µæ€§**: å°†æ¥ã®æ©Ÿèƒ½è¿½åŠ ã«å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆ
- **ä¿å®ˆæ€§**: ç†è§£ã—ã‚„ã™ãå¤‰æ›´ã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰æ§‹é€ 
- **å“è³ª**: å …ç‰¢ã§ãƒã‚°ã®å°‘ãªã„ä¿¡é ¼æ€§ã®é«˜ã„ã‚¢ãƒ—ãƒª

### å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **å€‹äººãƒ¦ãƒ¼ã‚¶ãƒ¼**: æ—¥å¸¸çš„ãªãƒ¡ãƒ¢ä½œæˆãƒ»ç®¡ç†
- **å­¦ç”Ÿ**: æˆæ¥­ãƒãƒ¼ãƒˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
- **ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ä¼šè­°è­°äº‹éŒ²ãƒ»ä¼ç”»æ›¸ä½œæˆ
- **é–‹ç™ºè€…**: æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ä»•æ§˜æ›¸ä½œæˆ
- **ç ”ç©¶è€…**: è«–æ–‡ãƒ»ç ”ç©¶ãƒãƒ¼ãƒˆä½œæˆ

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MemoHero                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Presentation Layer (SwiftUI)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MemoListViewâ”‚ MemoEditor  â”‚ Settings & Other Views â”‚ â”‚
â”‚  â”‚             â”‚ View        â”‚                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MemoStore   â”‚ FolderStore â”‚ TemplateManager        â”‚ â”‚
â”‚  â”‚             â”‚             â”‚ NotificationManager    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Infrastructure Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Local       â”‚ Firebase    â”‚ Export/Import          â”‚ â”‚
â”‚  â”‚ Storage     â”‚ Service     â”‚ Services               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

#### Presentation Layer (è¡¨ç¤ºå±¤)
- **è²¬ä»»**: UIè¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®å—ä»˜ã€ç”»é¢é·ç§»åˆ¶å¾¡
- **æŠ€è¡“**: SwiftUI, UIKit (ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
- **ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
  - `MemoListView`: ãƒ¡ã‚¤ãƒ³ãƒªã‚¹ãƒˆç”»é¢
  - `MemoEditorView`: ãƒ¡ãƒ¢ç·¨é›†ç”»é¢
  - `EventListView`: Firebaseé€£æºã‚¤ãƒ™ãƒ³ãƒˆç”»é¢
  - å„ç¨®è¨­å®šç”»é¢

#### Business Logic Layer (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤)
- **è²¬ä»»**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã€ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«å®Ÿè£…
- **æŠ€è¡“**: ObservableObject, Combine
- **ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
  - `MemoStore`: ãƒ¡ãƒ¢ãƒ‡ãƒ¼ã‚¿ç®¡ç†
  - `FolderStore`: ãƒ•ã‚©ãƒ«ãƒ€ç®¡ç†
  - `FirebaseService`: ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ
  - `WidgetDataManager`: ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆé€£æº

#### Infrastructure Layer (ã‚¤ãƒ³ãƒ•ãƒ©å±¤)
- **è²¬ä»»**: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã€ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
- **æŠ€è¡“**: FileManager, Firebase SDK, CloudKit
- **ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
  - JSONæ°¸ç¶šåŒ–ã‚·ã‚¹ãƒ†ãƒ 
  - Firebase Firestoreé€£æº
  - iCloudãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
  - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as User
    participant V as SwiftUI View
    participant S as ObservableObject Store
    participant BL as Business Logic
    participant P as Data Persistence
    participant FS as File System
    
    U->>+V: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
    V->>+S: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
    S->>+BL: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å‡¦ç†
    BL->>BL: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ»å¤‰æ›
    BL->>+P: æ°¸ç¶šåŒ–è¦æ±‚
    P->>+FS: ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
    FS-->>-P: æ“ä½œå®Œäº†
    P-->>-BL: æ°¸ç¶šåŒ–å®Œäº†
    BL-->>-S: å‡¦ç†å®Œäº†
    S->>S: @Publishedæ›´æ–°
    S-->>-V: çŠ¶æ…‹å¤‰æ›´é€šçŸ¥
    V->>V: UIæ›´æ–°
    V-->>-U: çµæœè¡¨ç¤º
```

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```mermaid
graph TB
    subgraph "Presentation Layer"
        A[MemoListView]
        B[MemoEditorView]
        C[EventListView]
        D[Settings Views]
    end
    
    subgraph "Business Logic Layer"
        E[MemoStore<br/>ObservableObject]
        F[FolderStore<br/>ObservableObject]
        G[FirebaseService<br/>ObservableObject]
        H[WidgetDataManager]
    end
    
    subgraph "Infrastructure Layer"
        I[Local JSON<br/>Persistence]
        J[Firebase<br/>Firestore]
        K[App Groups<br/>Widget Data]
        L[Export Services<br/>PDF/Markdown]
    end
    
    A --> E
    B --> E
    C --> G
    D --> F
    E --> I
    F --> I
    G --> J
    H --> K
    B --> L
```

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢ä¿‚å›³

```mermaid
erDiagram
    Memo {
        UUID id PK
        string title
        string content
        datetime createdAt
        datetime updatedAt
        UUID folderId FK
        boolean isPinned
        datetime dueDate
        double totalEditingTime
        boolean hasPreNotification
        int preNotificationMinutes
    }
    
    Folder {
        UUID id PK
        string name
        datetime createdAt
        datetime updatedAt
    }
    
    Template {
        UUID id PK
        string name
        string content
        string category
        datetime createdAt
    }
    
    Event {
        string id PK
        string title
        string content
        datetime date
        string category
    }
    
    Memo ||--o{ Folder : belongs_to
    Memo ||--o{ Template : uses
    Event ||--|| FirebaseService : syncs_from
```

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è©³ç´°

#### Memo Model
```swift
struct Memo: Identifiable, Codable, Equatable {
    // MARK: - Core Properties
    let id: UUID                    // ä¸€æ„è­˜åˆ¥å­
    var title: String              // ãƒ¡ãƒ¢ã‚¿ã‚¤ãƒˆãƒ«
    var content: String            // ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³æœ¬æ–‡
    var createdAt: Date           // ä½œæˆæ—¥æ™‚
    var updatedAt: Date           // æœ€çµ‚æ›´æ–°æ—¥æ™‚
    
    // MARK: - Organization Properties
    var folderId: UUID?           // æ‰€å±ãƒ•ã‚©ãƒ«ãƒ€ID
    var isPinned: Bool            // ãƒ”ãƒ³ç•™ã‚ãƒ•ãƒ©ã‚°
    
    // MARK: - Schedule Properties  
    var dueDate: Date?            // æœŸæ—¥
    var hasPreNotification: Bool  // äº‹å‰é€šçŸ¥æœ‰ç„¡
    var preNotificationMinutes: Int // äº‹å‰é€šçŸ¥æ™‚é–“(åˆ†)
    
    // MARK: - Analytics Properties
    var totalEditingTime: TimeInterval // ç´¯è¨ˆç·¨é›†æ™‚é–“
    
    // MARK: - Computed Properties
    var displayTitle: String {
        title.isEmpty ? "ç„¡é¡Œã®ãƒ¡ãƒ¢" : title
    }
    
    var wordCount: Int {
        content.components(separatedBy: .whitespacesAndNewlines)
               .filter { !$0.isEmpty }.count
    }
    
    var characterCount: Int {
        content.count
    }
    
    var lineCount: Int {
        content.components(separatedBy: .newlines).count
    }
}
```

#### Folder Model
```swift
struct Folder: Identifiable, Codable, Hashable, Equatable {
    let id: UUID               // ä¸€æ„è­˜åˆ¥å­
    var name: String          // ãƒ•ã‚©ãƒ«ãƒ€å
    let createdAt: Date       // ä½œæˆæ—¥æ™‚
    var updatedAt: Date       // æœ€çµ‚æ›´æ–°æ—¥æ™‚
    
    // MARK: - Predefined Folders
    static let defaultFolders = [
        Folder(name: "å€‹äºº", id: UUID()),
        Folder(name: "ä»•äº‹", id: UUID()),
        Folder(name: "ã‚¢ã‚¤ãƒ‡ã‚¢", id: UUID())
    ]
}
```

### çŠ¶æ…‹ç®¡ç†

#### State Management Pattern
```swift
// MARK: - Observable Store Pattern
class MemoStore: ObservableObject {
    @Published var memos: [Memo] = []
    @Published var isLoading: Bool = false
    @Published var error: MemoStoreError? = nil
    
    // MARK: - CRUD Operations
    func createMemo(_ memo: Memo)
    func updateMemo(_ memo: Memo) 
    func deleteMemo(_ memo: Memo)
    func fetchMemos()
    
    // MARK: - Query Operations
    func searchMemos(query: String) -> [Memo]
    func getMemosByFolder(_ folderId: UUID) -> [Memo]
    func getPinnedMemos() -> [Memo]
}
```

## ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

```
MemoHero/
â”œâ”€â”€ App/
â”‚   â”œâ”€â”€ MemoHeroApp.swift          // ã‚¢ãƒ—ãƒªã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ ContentView.swift          // ãƒ«ãƒ¼ãƒˆãƒ“ãƒ¥ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Memo.swift                 // ãƒ¡ãƒ¢ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ Folder.swift               // ãƒ•ã‚©ãƒ«ãƒ€ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ Template.swift             // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ ProfileModel.swift         // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ FirebaseModels.swift       // Firebaseé€£æºãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ NotificationModels.swift   // é€šçŸ¥é–¢é€£ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ Stores/
â”‚   â”œâ”€â”€ MemoStore.swift            // ãƒ¡ãƒ¢ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”‚   â”œâ”€â”€ FolderStore.swift          // ãƒ•ã‚©ãƒ«ãƒ€ç®¡ç†
â”‚   â”œâ”€â”€ TemplateManager.swift      // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ NotificationManager.swift  // é€šçŸ¥ç®¡ç†
â”‚   â””â”€â”€ NotificationHistoryManager.swift // é€šçŸ¥å±¥æ­´ç®¡ç†
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ MemoListView.swift         // ãƒ¡ã‚¤ãƒ³ãƒªã‚¹ãƒˆç”»é¢
â”‚   â”œâ”€â”€ MemoEditorView.swift       // ãƒ¡ãƒ¢ç·¨é›†ç”»é¢
â”‚   â”œâ”€â”€ EventListView.swift        // ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ç”»é¢
â”‚   â”œâ”€â”€ ProfileView.swift          // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†ç”»é¢
â”‚   â”œâ”€â”€ TemplateSelectionView.swift // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ
â”‚   â”œâ”€â”€ PushNotificationSettingsView.swift // é€šçŸ¥è¨­å®š
â”‚   â”œâ”€â”€ BackupHistoryView.swift    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´
â”‚   â”œâ”€â”€ iCloudBackupViews.swift    // CloudKitãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
â”‚   â””â”€â”€ Settings/                  // è¨­å®šç”»é¢ç¾¤
â”œâ”€â”€ Components/
â”‚   â”œâ”€â”€ HighlightableTextEditor.swift // ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ‡ã‚£ã‚¿
â”‚   â”œâ”€â”€ MarkdownRenderer.swift     // PDFç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â””â”€â”€ CalendarWithIndicators.swift // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ FirebaseService.swift      // Firebaseé€£æº
â”‚   â”œâ”€â”€ WidgetDataManager.swift    // ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆé€£æº
â”‚   â”œâ”€â”€ iCloudBackupManager.swift  // CloudKitãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
â”‚   â”œâ”€â”€ NotificationHistoryManager.swift // é€šçŸ¥å±¥æ­´ç®¡ç†
â”‚   â””â”€â”€ ShareSheet.swift           // ã‚·ã‚¹ãƒ†ãƒ å…±æœ‰
â”œâ”€â”€ Extensions/
â”‚   â”œâ”€â”€ MemoEditorViewExtension.swift
â”‚   â””â”€â”€ MemoListViewCalendarExtension.swift
â””â”€â”€ Resources/
    â”œâ”€â”€ Assets.xcassets            // ã‚¢ã‚»ãƒƒãƒˆ
    â”œâ”€â”€ Localizable.strings        // å¤šè¨€èªå¯¾å¿œ
    â””â”€â”€ templates.csv              // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
```

### ä¾å­˜é–¢ä¿‚è¨­è¨ˆ

#### Dependency Injection
```swift
// MARK: - Environment Objects Pattern
struct ContentView: View {
    @StateObject private var memoStore = MemoStore()
    @StateObject private var folderStore = FolderStore()
    @StateObject private var firebaseService = FirebaseService.shared
    
    var body: some View {
        MemoListView()
            .environmentObject(memoStore)
            .environmentObject(folderStore)
            .environmentObject(firebaseService)
    }
}
```

#### Service Layer
```swift
protocol DataPersistenceProtocol {
    func save<T: Codable>(_ data: T, to file: String) throws
    func load<T: Codable>(_ type: T.Type, from file: String) throws -> T
}

class LocalDataService: DataPersistenceProtocol {
    // JSON based local persistence implementation
}

class FirebaseDataService: DataPersistenceProtocol {
    // Firebase Firestore implementation
}
```

## ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ

### ç”»é¢æ§‹æˆ

#### ç”»é¢é·ç§»å›³
```mermaid
stateDiagram-v2
    [*] --> MemoList
    
    MemoList --> MemoEditor : select memo
    MemoList --> Settings : settings button
    MemoList --> EventList : events button
    
    MemoEditor --> MemoList : back/save
    MemoEditor --> TemplateSelection : template button
    MemoEditor --> Export : export menu
    
    Settings --> FolderManagement
    Settings --> BackupRestore
    Settings --> ThemeSettings
    
    EventList --> EventDetail
    EventDetail --> EventList
    
    Export --> [*] : share complete
    FolderManagement --> Settings
    BackupRestore --> Settings
    ThemeSettings --> Settings
```

#### ãƒ¡ãƒ¢ç·¨é›†ãƒ•ãƒ­ãƒ¼
```mermaid
flowchart TD
    A[ãƒ¡ãƒ¢é¸æŠ] --> B{æ–°è¦ãƒ¡ãƒ¢?}
    B -->|Yes| C[ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹]
    B -->|No| D[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹]
    
    C --> E[ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›]
    D --> F{ç·¨é›†ãƒœã‚¿ãƒ³?}
    F -->|Yes| E
    F -->|No| G[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º]
    
    E --> H{ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°?}
    H -->|ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ | I[è‡ªå‹•ä¿å­˜]
    H -->|å®Œäº†ãƒœã‚¿ãƒ³| J[æ‰‹å‹•ä¿å­˜]
    H -->|ã‚­ãƒ£ãƒ³ã‚»ãƒ«| K[å…ƒã®çŠ¶æ…‹ã«å¾©å…ƒ]
    
    I --> L[ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¿å­˜]
    J --> L
    K --> M[ç·¨é›†å‰çŠ¶æ…‹å¾©å…ƒ]
    
    L --> N[MemoStoreæ›´æ–°]
    M --> O[ä¸€è¦§ç”»é¢ã«æˆ»ã‚‹]
    N --> O
```

#### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ

```swift
// MARK: - Navigation Structure
enum NavigationDestination: Hashable {
    case memoEditor(Memo?)
    case settings
    case folderManagement
    case templateSelection
    case eventList
    case eventDetail(Event)
}

// MARK: - Navigation State Management
@MainActor
class NavigationCoordinator: ObservableObject {
    @Published var path = NavigationPath()
    @Published var presentedSheet: NavigationDestination?
    @Published var presentedFullScreen: NavigationDestination?
}
```

### UI/UXè¨­è¨ˆåŸå‰‡

#### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

**ã‚«ãƒ©ãƒ¼ã‚·ã‚¹ãƒ†ãƒ **
```swift
enum AppColors {
    static let primary = Color.blue
    static let secondary = Color.gray
    static let accent = Color.orange
    static let background = Color(.systemBackground)
    static let surface = Color(.secondarySystemBackground)
    static let text = Color.primary
    static let textSecondary = Color.secondary
}
```

**ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ã‚·ã‚¹ãƒ†ãƒ **
```swift
enum AppFonts {
    static let largeTitle = Font.largeTitle.weight(.bold)
    static let title1 = Font.title.weight(.semibold)
    static let title2 = Font.title2.weight(.medium)
    static let body = Font.body
    static let caption = Font.caption
}
```

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ã‚¹ãƒ†ãƒ **
```swift
enum AppLayout {
    static let paddingSmall: CGFloat = 8
    static let paddingMedium: CGFloat = 16
    static let paddingLarge: CGFloat = 24
    static let cornerRadius: CGFloat = 12
    static let shadowRadius: CGFloat = 4
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

```swift
// MARK: - Adaptive Layout
struct AdaptiveLayout {
    static func isCompact(_ geometry: GeometryProxy) -> Bool {
        geometry.size.width < 768
    }
    
    static func columnCount(for width: CGFloat) -> Int {
        width < 768 ? 1 : (width < 1024 ? 2 : 3)
    }
}
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹**: iOSæ¨™æº–ã®ã‚¢ãƒ—ãƒªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒ
- **æš—å·åŒ–**: ç«¯æœ«ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æš—å·åŒ–ã«ä¾å­˜
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«ã§ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™

#### ã‚¯ãƒ©ã‚¦ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```swift
// MARK: - Firebase Security Rules
/*
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /events/{document} {
      allow read: if true;
      allow write: if false; // Read-only for events
    }
  }
}
*/
```

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·

#### ãƒ‡ãƒ¼ã‚¿åé›†ãƒãƒªã‚·ãƒ¼
- **å€‹äººæƒ…å ±**: åé›†ã—ãªã„
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±**: 100%ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã€å¤–éƒ¨é€ä¿¡ãªã—
- **ä½¿ç”¨çµ±è¨ˆ**: åé›†ã—ãªã„  
- **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆ**: ã‚ªãƒ—ãƒˆã‚¤ãƒ³æ–¹å¼
- **åˆ†æãƒ‡ãƒ¼ã‚¿**: åŒ¿ååŒ–ã•ã‚ŒãŸã‚‚ã®ã®ã¿

#### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ä¿è­·
```swift
// MARK: - Profile Privacy Protection
class ProfileDataManager {
    private static let LOCAL_ONLY_STORAGE = true
    private static let EXTERNAL_TRANSMISSION_PROHIBITED = true
    
    // ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿
    func saveProfile(_ profile: UserProfile) {
        guard LOCAL_ONLY_STORAGE else {
            fatalError("Profile data must only be stored locally")
        }
        // UserDefaultsã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«JSONã«ä¿å­˜
    }
    
    // å¤–éƒ¨é€ä¿¡ã¯å®Œå…¨ã«ç¦æ­¢
    func transmitProfile(_ profile: UserProfile) {
        guard !EXTERNAL_TRANSMISSION_PROHIBITED else {
            fatalError("Profile transmission to external servers is prohibited")
        }
    }
}
```

#### ãƒ‡ãƒ¼ã‚¿æœ€å°åŒ–
```swift
// MARK: - Data Minimization
struct PrivacyCompliantData: Codable {
    let contentHash: String    // Content hash instead of raw content
    let wordCount: Int        // Statistical info only
    let lastModified: Date    // Timestamp only
    // No personal identifiers
    // No raw content
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### æœ€é©åŒ–æˆ¦ç•¥

#### ãƒ¡ãƒ¢ãƒªç®¡ç†
```swift
// MARK: - Memory Optimization
class MemoStore: ObservableObject {
    private var memosCache: [UUID: Memo] = [:]
    private let cacheLimit = 100
    
    private func manageCacheSize() {
        if memosCache.count > cacheLimit {
            let oldestKeys = Array(memosCache.keys.prefix(20))
            oldestKeys.forEach { memosCache.removeValue(forKey: $0) }
        }
    }
}
```

#### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
```swift
// MARK: - Rendering Optimization
struct MemoRow: View {
    let memo: Memo
    
    var body: some View {
        LazyVStack(alignment: .leading) {
            // Lazy rendering for large lists
            Text(memo.displayTitle)
            Text(memo.content.prefix(100))
        }
        .id(memo.id) // Stable identity for diff algorithm
    }
}
```

### ãƒ‡ãƒ¼ã‚¿åŒæœŸæœ€é©åŒ–

#### ãƒãƒƒãƒå‡¦ç†
```swift
// MARK: - Batch Operations
extension MemoStore {
    func batchUpdateMemos(_ updates: [MemoUpdate]) async {
        await withTaskGroup(of: Void.self) { group in
            for update in updates {
                group.addTask {
                    await self.updateMemoAsync(update)
                }
            }
        }
    }
}
```

#### å·®åˆ†åŒæœŸ
```swift
// MARK: - Differential Sync
struct SyncManager {
    func syncChanges() async {
        let localChanges = await getLocalChanges()
        let remoteChanges = await getRemoteChanges()
        let conflicts = detectConflicts(local: localChanges, remote: remoteChanges)
        await resolveConflicts(conflicts)
    }
}
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ

### ã‚¨ãƒ©ãƒ¼åˆ†é¡

```swift
// MARK: - Error Hierarchy
protocol AppError: Error, LocalizedError {
    var code: String { get }
    var severity: ErrorSeverity { get }
    var recoveryStrategy: RecoveryStrategy { get }
}

enum ErrorSeverity {
    case low      // Warning, user can continue
    case medium   // Error, user should be informed
    case high     // Critical, may require app restart
}

enum RecoveryStrategy {
    case retry
    case fallback
    case userInput
    case restart
}
```

### ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    A[ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ] --> B{ã‚¨ãƒ©ãƒ¼é‡è¦åº¦}
    
    B -->|Low| C[è­¦å‘Šãƒ­ã‚°è¨˜éŒ²]
    B -->|Medium| D[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º]
    B -->|High| E[é‡è¦ã‚¨ãƒ©ãƒ¼è¡¨ç¤º]
    
    C --> F[å‡¦ç†ç¶™ç¶š]
    D --> G{ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ}
    E --> H[ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ç¸®é€€]
    
    G -->|å†è©¦è¡Œ| I[æ“ä½œå†å®Ÿè¡Œ]
    G -->|ã‚­ãƒ£ãƒ³ã‚»ãƒ«| F
    
    I --> J{æˆåŠŸ?}
    J -->|Yes| F
    J -->|No| D
    
    H --> K[åŸºæœ¬æ©Ÿèƒ½ã®ã¿æä¾›]
    K --> L[å¾©æ—§å¾…ã¡]
```

#### ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼ãƒ•ãƒ­ãƒ¼
```mermaid
sequenceDiagram
    participant U as User
    participant E as Editor
    participant S as MemoStore
    participant P as Persistence
    participant A as Alert
    
    U->>+E: ãƒ¡ãƒ¢ä¿å­˜
    E->>+S: saveMemo()
    S->>+P: writeToFile()
    P-->>-S: Error: Disk Full
    S->>S: Error Handling
    S->>+A: showAlert("ä¿å­˜å¤±æ•—")
    A-->>-U: ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
    S-->>-E: ä¿å­˜å¤±æ•—
    E-->>-U: ç·¨é›†ç¶™ç¶šå¯èƒ½
    
    Note over U,A: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç·¨é›†å†…å®¹ã‚’ä¿æŒã—ãŸã¾ã¾<br/>ä»–ã®æ–¹æ³•ã§ä¿å­˜å¯èƒ½
```

### ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 

```swift
// MARK: - Logging System
enum LogLevel: Int, CaseIterable {
    case verbose = 0
    case debug = 1
    case info = 2
    case warning = 3
    case error = 4
}

class Logger {
    static let shared = Logger()
    
    func log(_ message: String, level: LogLevel = .info, 
             file: String = #file, function: String = #function, line: Int = #line) {
        #if DEBUG
        let timestamp = DateFormatter.debugFormatter.string(from: Date())
        print("[\(timestamp)] [\(level)] [\(function):\(line)] \(message)")
        #endif
    }
}
```

## ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰
```
        ğŸ”º UI Tests (E2E)
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      ğŸ”ºğŸ”º Integration Tests
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ”ºğŸ”ºğŸ”º Unit Tests (Majority)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

#### ãƒ†ã‚¹ãƒˆåˆ†é¡
- **Unit Tests**: Model, Store, Service classes
- **Integration Tests**: Data flow, Firebase integration  
- **UI Tests**: Critical user scenarios
- **Performance Tests**: Large data sets, memory usage
- **Accessibility Tests**: VoiceOver, Dynamic Type

### ãƒ†ã‚¹ãƒˆå®Ÿè£…

```swift
// MARK: - Unit Test Example
class MemoStoreTests: XCTestCase {
    var sut: MemoStore!
    var mockPersistence: MockDataPersistence!
    
    override func setUp() {
        mockPersistence = MockDataPersistence()
        sut = MemoStore(persistence: mockPersistence)
    }
    
    func testCreateMemo_ShouldAddToStore() {
        // Given
        let memo = Memo(title: "Test", content: "Content")
        
        // When
        sut.createMemo(memo)
        
        // Then
        XCTAssertTrue(sut.memos.contains(memo))
        XCTAssertTrue(mockPersistence.saveWasCalled)
    }
}
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨­è¨ˆ

### ãƒ“ãƒ«ãƒ‰è¨­å®š

#### Configuration Management
```swift
enum BuildConfiguration {
    case debug
    case staging  
    case production
    
    var isDebugMode: Bool {
        switch self {
        case .debug, .staging: return true
        case .production: return false
        }
    }
    
    var firebaseConfigFile: String {
        switch self {
        case .debug: return "GoogleService-Info-Debug"
        case .staging: return "GoogleService-Info-Staging"
        case .production: return "GoogleService-Info"
        }
    }
}
```

#### Feature Flags
```swift
struct FeatureFlags {
    static let firebaseEnabled = true
    static let widgetEnabled = true
    static let premiumFeatures = false
    static let betaFeatures = BuildConfiguration.current.isDebugMode
}
```

### ãƒªãƒªãƒ¼ã‚¹ç®¡ç†

#### ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°æˆ¦ç•¥
- **Semantic Versioning**: MAJOR.MINOR.PATCH
- **Build Number**: è‡ªå‹•ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
- **Release Notes**: è‡ªå‹•ç”Ÿæˆ + æ‰‹å‹•ç·¨é›†

#### é…å¸ƒæˆ¦ç•¥
```mermaid
flowchart LR
    A[Development] --> B[Internal Testing]
    B --> C[TestFlight Beta]
    C --> D[App Store Review]
    D --> E[Public Release]
    
    F[Hotfix] --> C
    F --> E
    
    subgraph "Quality Gates"
        G[Unit Tests]
        H[Integration Tests]
        I[UI Tests]
    end
    
    A --> G
    G --> H
    H --> I
    I --> B
```

#### ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹
```mermaid
gantt
    title MemoHero ãƒªãƒªãƒ¼ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    dateFormat YYYY-MM-DD
    section é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º
        æ©Ÿèƒ½é–‹ç™º          :dev1, 2024-08-01, 30d
        çµ±åˆãƒ†ã‚¹ãƒˆ        :test1, after dev1, 10d
        UI/UXãƒ†ã‚¹ãƒˆ       :ui1, after test1, 5d
    section ãƒªãƒªãƒ¼ã‚¹æº–å‚™
        TestFlighté…å¸ƒ    :beta1, after ui1, 7d
        ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ :feedback1, after beta1, 14d
        App Storeç”³è«‹     :submit1, after feedback1, 3d
    section æœ¬ãƒªãƒªãƒ¼ã‚¹
        å¯©æŸ»æœŸé–“          :review1, after submit1, 7d
        å…¬é–‹              :release1, after review1, 1d
```

## ç›£è¦–ãƒ»åˆ†æ

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç›£è¦–

#### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
```swift
struct AppMetrics {
    static func trackScreenView(_ screenName: String) {
        #if !DEBUG
        Analytics.logEvent("screen_view", parameters: [
            "screen_name": screenName
        ])
        #endif
    }
    
    static func trackUserAction(_ action: String) {
        #if !DEBUG  
        Analytics.logEvent("user_action", parameters: [
            "action": action,
            "timestamp": Date().timeIntervalSince1970
        ])
        #endif
    }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

#### Core Metrics
- **èµ·å‹•æ™‚é–“**: App Launch â†’ First Screen
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: Peak Memory Usage
- **CPUä½¿ç”¨ç‡**: Average CPU Usage
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: Firebase Response Time
- **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ç‡**: Crash-free Users %

#### ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **DAU/MAU**: Daily/Monthly Active Users
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“**: Average Session Duration
- **æ©Ÿèƒ½ä½¿ç”¨ç‡**: Feature Adoption Rate
- **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçµ±è¨ˆ**: Export Type Distribution


## æ”¹è¨‚å±¥æ­´

| Version | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|---------|------|----------|--------|
| 1.0 | 2025-08-29 | åˆç‰ˆä½œæˆ | kondokenji |

**MemoHero åŸºæœ¬è¨­è¨ˆæ›¸ v1.0**  
Â© 2025 kondokenji. All rights reserved.